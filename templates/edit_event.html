<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Procurement Event</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
    <div class="max-w-4xl mx-auto py-10">
        <h1 class="text-2xl font-bold mb-4 text-center">Edit Procurement Event</h1>
        <h2 class="text-lg font-medium mb-4">Selected Suppliers</h2>
        <ul class="list-disc pl-5">
            {% for supplier in selected_suppliers %}
            <li>{{ supplier }}</li>
            {% endfor %}
        </ul>
        <form class="bg-white p-6 shadow-md rounded mt-4">
            <div>
                <label for="payment_terms" class="block text-sm font-medium">Payment Terms</label>
                <input type="text" id="payment_terms" class="w-full p-2 border border-gray-300 rounded" required>
            </div>
            <div>
                <label for="delivery_deadline" class="block text-sm font-medium mt-4">Delivery Deadline</label>
                <input type="date" id="delivery_deadline" class="w-full p-2 border border-gray-300 rounded" required>
            </div>
            <button type="button" onclick="submitEditedEvent()" class="bg-blue-600 text-white px-4 py-2 rounded mt-6 w-full hover:bg-blue-700">
                Publish Event
            </button>
        </form>
    </div>
</body>
<script>
    function submitEditedEvent() {
        const data = {
            payment_terms: document.getElementById("payment_terms").value,
            delivery_deadline: document.getElementById("delivery_deadline").value
        };

        fetch('/publish_event', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(data => {
            if (data.message) {
                alert(data.message);
                window.location.href = "/analyze_quotes";
            }
        })
        .catch(error => console.error("Error publishing event:", error));
    }
</script>
</html>
